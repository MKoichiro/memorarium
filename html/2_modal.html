<!DOCTYPE html>
<html lang="ja">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <!-- font: 'Economica' -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Economica">
  <!-- icon: link        -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0" />
  <!-- font awesome      -->
    <script src="https://kit.fontawesome.com/a6578f7748.js" crossorigin="anonymous"></script>
  <!-- stylesheets       -->
    <link rel="stylesheet" href="../css/common.css">
    <link rel="stylesheet" href="../css/new.css">
    <link rel="stylesheet" href="../css/prettify.css">
  <!-- favicon          -->
    <link id="favicon" rel="shortcut icon" href="../img/favicon/favicon1.png" type="image/x-icon">
  
  <!-- articleInfo.jsonで 参照する記事の ID を new.mjs に渡す -->
    <script>const articleId = 2, relatedArtIds = [0, 1, 5, 3], codeDir = 'code/2_modal';</script>
  <!-- header, footer, asede など -->
    <script type="module" src="../js/common.mjs"></script>
  <!-- txtファイル読み込みの非同期処理 -->
    <script type="module" src="../js/readCodeTxt.mjs"></script>
  <!-- main module -->
    <script type="module" src="../js/new.mjs"></script>

  <title> MEMORARiUM | モーダルウィンドウ </title>
</head>

<body class="off-anime loading">

  <header id="top">
    <div id="bubbles-bg-container">
      <div class="header-container">
        <a href="../html/index.html" id="header-logo">
          <img src="../img/favicon/favicon1.png" alt="">
          <h1> MEMORARiUM </h1>
        </a>
      </div>
    </div>
  </header>


  <main>
    <div class="main-contents-container">
      <article class="main-article">

        <h1 id="title">
          <!-- <mark class="simple-1"> 記事タイル </mark> -->
        </h1>
        <div class="date-line">
          <hr><time class="date" id="this-art-date"><!-- [ 20XX.XX.XX ] --></time><hr>
        </div>
        <p class="paragraph" id="intro">
          <!-- 【new.mjs, articleInfo.json】イントロの記述 -->
        </p>
        <section id="outline-acc-container">
          <div class="outline-bar">
            <h4 class="outline-text"><i class="fa-solid fa-bookmark"></i>OUTLINE</h4>
          </div>
          <!-- new.mjs から ul 要素を生成 -->
          <div class="outline-bar">
            <a id="outline-btn" href="#outline-acc-container">
              <i class="fa-solid fa-chevron-up"></i>
              <span id="open-text" > OPEN  </span>
              <span id="close-text"> CLOSE </span>
            </a>
          </div>
        </section>

        <section class="chapter" id="chapter0">
          <a class="chapter-title-container" href="#chapter0">
            <h2 class="chapter-title">前書き</h2>
          </a>
          <section class="chapter-contents-container">
            <p class="paragraph">
              フレームワークなり、ライブラリなり、プラグインなりを使えばもっと簡単なのかもしれないが、
              まだ勉強していないので、バニラで書いてみた。案外すんなり(?)かけたのでメモ。
              タイトルの通り、モーダルウィンドウに付きうる4つの機能を盛り込めた。
              あとはいらなかったら引き算して使う。
              せっかくなので今回は、モーダルは設定画面というこにして、
              中でダークモードとノーマルモードのテーマ切り替えをできるようにしてみた。
            </p>
          </section>
        </section>

        <div class="to-top-container">
          <a href="#top" class="to-top">
            <span class="material-symbols-outlined">keyboard_double_arrow_up</span>
            to Top
          </a>
        </div>
        <hr class="separater">


        <section class="chapter" id="chapter1">
          <a class="chapter-title-container" href="#chapter1">
            <h2 class="chapter-title"> 完成版 </h2>
          </a>
          <section class="chapter-contents-container">
            <p class="paragraph">
              完成版は以下の通り。画面左下に配置してあるアイコンをクリックしてモーダルを展開できる。
              展開状態リサイズが可能。
              最小化するときは、2つあるうち左のボタンをクリックすれば閉じる。
            </p>
            <section class="note-container">
              <h5 class="note-text">
                <i class="note-icon fa-solid fa-list-ol"></i> POINT
              </h5>
              <hr class="note-underline">

              <div class="note-contents">
                <section class="note-content">
                  <ol class="note-list-container" data-list-style-type="arabic">
                    <li class="note-list">
                      <div class="note-list-item">
                        <p>
                          最小化状態は初め、左下に配置しているが、最小化状態でも移動は可能。
                        </p>
                      </div>
                    </li>
                    <li class="note-list">
                      <div class="note-list-item">
                        <p>
                          最初の最小化状態で移動することなく展開した場合には画面右上で展開する。
                        </p>
                      </div>
                    </li>
                    <li class="note-list">
                      <div class="note-list-item">
                        <p>
                          展開状態では移動に加えて、リサイズも可能。
                        </p>
                      </div>
                    </li>
                    <li class="note-list">
                      <div class="note-list-item">
                        <p>
                          最小化するときは必ず左下に自動的に移動させる。
                        </p>
                      </div>
                    </li>
                    <li class="note-list">
                      <div class="note-list-item">
                        <p>
                          2回目以降の展開時には、最小化前の大きさで、最小化前の場所に展開する。
                        </p>
                      </div>
                    </li>
                    <li class="note-list">
                      <div class="note-list-item">
                        <p>
                          ただし、2回目以降の展開でも、最小化状態で移動していた場合は、その座標で開く。
                        </p>
                      </div>
                    </li>
                    <li class="note-list">
                      <div class="note-list-item">
                        <p>
                          初期状態を最小化状態にするか、展開状態にするかは、最初にdiv.modal(後述)にminimizedクラスをつけるかどうかで制御可能。
                        </p>
                      </div>
                    </li>
                    <li class="note-list">
                      <div class="note-list-item">
                        <p>
                          移動可能アイコンは移動できることを示しているだけで、実際にはバー部分全体をつかんで移動が可能。
                        </p>
                      </div>
                    </li>
                  </ol>

                </section>
              </div>
            </section>
            <section class="code-prettify-container">
              <nav class="lang-type-tabs">
                <button class="lang-type-tab active"> index.html          </button>
                <button class="lang-type-tab"       > style.css           </button>
                <button class="lang-type-tab"       > main.js             </button>
                <button class="lang-type-tab"       > (theme.css)         </button>
                <button class="lang-type-tab"       > (changeTheme.js)    </button>
                <button class="lang-type-tab"       > (commonForDemo.css) </button>
              </nav>

              <div class="code-prettify-contents">
                <div class="code-prettify-content active">
                  <button class="clipboard-btn"><i class="fa-solid fa-clipboard"></i></button>
                  <pre><code class="prettyprint linenums" data-pp-highlight="100-130"></code></pre>
                </div>

                <div class="code-prettify-content">
                  <button class="clipboard-btn"><i class="fa-solid fa-clipboard"></i></button>
                  <pre><code class="prettyprint linenums lang-css"  data-pp-highlight=""></code></pre>
                </div>

                <div class="code-prettify-content">
                  <button class="clipboard-btn"><i class="fa-solid fa-clipboard"></i></button>
                  <pre><code class="prettyprint linenums"  data-pp-highlight=""></code></pre>
                </div>

                <div class="code-prettify-content">
                  <button class="clipboard-btn"><i class="fa-solid fa-clipboard"></i></button>
                  <pre><code class="prettyprint linenums lang-css"  data-pp-highlight=""></code></pre>
                </div>

                <div class="code-prettify-content">
                  <button class="clipboard-btn"><i class="fa-solid fa-clipboard"></i></button>
                  <pre><code class="prettyprint linenums lang-css"  data-pp-highlight=""></code></pre>
                </div>

                <div class="code-prettify-content">
                  <button class="clipboard-btn"><i class="fa-solid fa-clipboard"></i></button>
                  <pre><code class="prettyprint linenums lang-css"  data-pp-highlight=""></code></pre>
                </div>

                <a class="enlarge-btn">
                  <i class="fa-solid fa-chevron-up"></i>
                  <div class="enlarge-text-container"><p class="enlarge-text show">Show All</p><p class="reduce-text">Reduce</p></div>
                </a>

              </div>

            </section>

            <section class="output-container">
              <nav class="output-tabs">
                <button class="output-tab active" data-tab-link-id=""> OUTPUT </button>
              </nav>
              <div class="output-contents">
                <div class="output-content active">
                  <iframe src="../demo/2_modal/index0.html" frameborder="0" width="100%" height="500px" sandbox="allow-scripts"></iframe>
                </div>
              </div>
            </section>

            <section class="note-container">
              <h5 class="note-text">
                <span class="note-icon material-symbols-outlined">link</span> LINK
              </h5>
              <div class="note-contents">
                <div class="note-content">
                  <ul>
                    <li>
                      <a class="ref-content" target="_blank" href="../demo/2_modal/index0.html">
                        <i class="fa-solid fa-up-right-from-square"></i>
                        <p class="ref-title"> Demo for MODAL WINDOW | 完成版 </p>
                      </a>
                    </li>
                  </ul>
                </div>
              </div>
            </section>



          </section>
        </section>

        <div class="to-top-container">
          <a href="#top" class="to-top">
            <span class="material-symbols-outlined">keyboard_double_arrow_up</span>
            to Top
          </a>
        </div>
        <hr class="separater">


        <section class="chapter" id="chapter2">
          <a class="chapter-title-container" href="#chapter2">
            <h2 class="chapter-title"> HTML </h2>
          </a>
          <section class="chapter-contents-container">

            <p class="paragraph">
              モーダルは
              <span class="show-code"><code class="inline-code"> div.modal </code></span>
              以下の部分であり、
              1.
              <span class="show-code"><code class="inline-code"> div.modal-bar </code></span>
              : 展開時に表示するのバー、
              2.
              <span class="show-code"><code class="inline-code"> button#enlarge-btn </code></span>
              : 最小化状態で表示する(設定アイコンの)展開ボタン、
              3.
              <span class="show-code"><code class="inline-code"> div.modal-contents-container </code></span>
              : 展開時に表示するモーダルの本文、
              の3つの部品から構成される。
              全体を囲う
              <span class="show-code"><code class="inline-code"> .modal </code></span>
              に対して、
              <span class="show-code"><code class="inline-code"> minimized </code></span>
              クラスを着脱することで最小化と展開を行い、
              中の3つの部品は、それと同時に表示と非表示の切り替えを行う仕組み。
              なお、ロード時に展開しておきたければ、
              <span class="show-code"><code class="inline-code"> minimized </code></span>
              クラスは外しておき、
              最小化状態にしておきたければつけておく。
            </p>
            <p class="paragraph">
              また、ウィンドウタイトルを記述する
              <span class="show-code"><code class="inline-code"> p </code></span>
              要素は
              <span class="show-code"><code class="inline-code"> div.bar-btns </code></span>
              とともに
              <span class="show-code"><code class="inline-code"> div.modal-bar </code></span>
              の中にある。
              なお、
              <span class="show-code"><code class="inline-code"> div.bar-btns </code></span>
              のさらに中には最小化アイコンと移動可能アイコンが入っている。
            </p>
            
            <section class="code-prettify-container">
              <nav class="lang-type-tabs">
                <button class="lang-type-tab active"> index.html (outline)   </button>
                <button class="lang-type-tab"       > index.html (modal部分) </button>
              </nav>

              <div class="code-prettify-contents">
                <div class="code-prettify-content active">
                  <button class="clipboard-btn"><i class="fa-solid fa-clipboard"></i></button>
                  <pre><code class="prettyprint linenums" data-pp-highlight="44-76"></code></pre>
                </div>

                <div class="code-prettify-content">
                  <button class="clipboard-btn"><i class="fa-solid fa-clipboard"></i></button>
                  <pre><code class="prettyprint linenums"  data-pp-highlight=""></code></pre>
                </div>

                <a class="enlarge-btn">
                  <i class="fa-solid fa-chevron-up"></i>
                  <div class="enlarge-text-container"><p class="enlarge-text show">Show All</p><p class="reduce-text">Reduce</p></div>
                </a>

              </div>

            </section>
            

          </section>
        </section>

        <div class="to-top-container">
          <a href="#top" class="to-top">
            <span class="material-symbols-outlined">keyboard_double_arrow_up</span>to Top
          </a>
        </div>
        <hr class="separater">


        <section class="chapter" id="chapter3">
          <a class="chapter-title-container" href="#chapter3">
            <h2 class="chapter-title"> CSS </h2>
          </a>
          <section class="chapter-contents-container">

            <section class="subchapter" id="subchapter3-1">
              <a class="subchapter-title-container" href="#subchapter3-1">
                <h3 class="subchapter-title"> モーダル関連のCSS </h3>
              </a>
              <section class="subchapter-contents-container">
                <p class="paragraph">
                  モーダル関連で一番親の
                  <span class="show-code"><code class="inline-code"> div.modal </code></span>
                  は、
                  <span class="show-code"><code class="inline-code"> position: fixed; </code></span>
                  で画面内に固定している。
                  また、cssから指定している、
                  <span class="show-code"><code class="inline-code"> top </code></span>,
                  <span class="show-code"><code class="inline-code"> left </code></span>
                  や、
                  <span class="show-code"><code class="inline-code"> width </code></span>,
                  <span class="show-code"><code class="inline-code"> height </code></span>
                  はあくまで初期値であり、
                  ユーザーが移動やリサイズを行う場合には、その都度main.jsから
                  <span class="show-code"><code class="inline-code"> style </code></span>
                  属性を書き換える。
                  また、
                  <span class="show-code"><code class="inline-code"> overflow: visible; </code></span>
                  以外を指定したうえで
                  <span class="show-code"><code class="inline-code"> resize: both; </code></span>
                  とすることで縦横両方向のリサイズを許可できる。
                  最小化状態ではリサイズされると困るので、
                  <span class="show-code"><code class="inline-code"> minimized </code></span>
                  クラスがついたら禁止(
                  <span class="show-code"><code class="inline-code"> none </code></span>
                  を指定)している。
                  なお、スマホでは
                  <span class="show-code"><code class="inline-code"> resize </code></span>
                  プロパティは効かないのでオーバーフローがないように注意する。
                </p>
                <p class="paragraph">
                  展開時のタイトルや最小化・移動可能アイコン部分である
                  <span class="show-code"><code class="inline-code"> div.modal-bar </code></span>
                  は、
                  <span class="show-code"><code class="inline-code"> .modal </code></span>
                  に
                  <span class="show-code"><code class="inline-code"> minimized </code></span>
                  クラスがついたら、非表示にする。
                  親全体で非表示にするので、子要素の
                  <span class="show-code"><code class="inline-code"> div.bar-btns </code></span>
                  などは表示切替に関してなにもしなくてよい。
                </p>
                <p class="paragraph">
                  最小化状態で表示する
                  <span class="show-code"><code class="inline-code"> button#enlarge-btn </code></span>
                  は、
                  <span class="show-code"><code class="inline-code"> minimized </code></span>
                  クラスのついたら逆に表示するようにしているだけ。
                </p>
                <p class="paragraph">
                  <span class="show-code"><code class="inline-code"> div.modal-contents-container </code></span>は、
                  <span class="show-code"><code class="inline-code"> div.modal-bar </code></span>
                  と同様に表示切替を行っている。
                </p>
                <section class="code-prettify-container">
                  <nav class="lang-type-tabs">
                    <button class="lang-type-tab active"> style.css                                </button>
                    <button class="lang-type-tab"       > style.css (div.modal)                    </button>
                    <button class="lang-type-tab"       > style.css (div.modal-bar)                </button>
                    <button class="lang-type-tab"       > style.css (button#enlarge-btn)           </button>
                    <button class="lang-type-tab"       > style.css (div.modal-contents-container) </button>
                  </nav>
      
                  <div class="code-prettify-contents">
                    <div class="code-prettify-content active">
                      <button class="clipboard-btn"><i class="fa-solid fa-clipboard"></i></button>
                      <pre><code class="prettyprint linenums lang-css" data-pp-highlight=""></code></pre>
                    </div>
                    <div class="code-prettify-content">
                      <button class="clipboard-btn"><i class="fa-solid fa-clipboard"></i></button>
                      <pre><code class="prettyprint linenums lang-css" data-pp-highlight=""></code></pre>
                    </div>
                    <div class="code-prettify-content">
                      <button class="clipboard-btn"><i class="fa-solid fa-clipboard"></i></button>
                      <pre><code class="prettyprint linenums lang-css" data-pp-highlight=""></code></pre>
                    </div>
                    <div class="code-prettify-content">
                      <button class="clipboard-btn"><i class="fa-solid fa-clipboard"></i></button>
                      <pre><code class="prettyprint linenums lang-css" data-pp-highlight=""></code></pre>
                    </div>
                    <div class="code-prettify-content">
                      <button class="clipboard-btn"><i class="fa-solid fa-clipboard"></i></button>
                      <pre><code class="prettyprint linenums lang-css" data-pp-highlight=""></code></pre>
                    </div>
                    <a class="enlarge-btn">
                      <i class="fa-solid fa-chevron-up"></i>
                      <div class="enlarge-text-container"><p class="enlarge-text show">Show All</p><p class="reduce-text">Reduce</p></div>
                    </a>
                  </div>
                </section>
      
      
              </section>
      
            </section>
      
            <section class="subchapter" id="subchapter3-2">
              <a class="subchapter-title-container" href="#subchapter3-2">
                <h3 class="subchapter-title"> おまけ: ダークモードに関するCSSの備忘録 </h3>
              </a>
              <section class="subchapter-contents-container">
                <p class="paragraph">
                  <span class="show-code"><code class="inline-code"> @media(prefers-color-scheme: dark) { } </code></span>
                  の中に書くと、ダークモード時のスタイルが設定できるらしい。
                  以下のように、
                  <span class="show-code"><code class="inline-code"> :root { } </code></span>
                  にcss変数としてカラーセットを事前に用意しておき、ダークモードの場合、
                  <span class="show-code"><code class="inline-code"> @media(prefers-color-scheme: dark) { :root { } } </code></span>
                  の中で上書きするとよさそう。
                </p>

                <section class="code-prettify-container">
                  <nav class="lang-type-tabs">
                    <button class="lang-type-tab active"> theme.css </button>
                  </nav>
      
                  <div class="code-prettify-contents">
                    <div class="code-prettify-content active">
                      <button class="clipboard-btn"><i class="fa-solid fa-clipboard"></i></button>
                      <pre><code class="prettyprint linenums lang-css" data-pp-highlight=""></code></pre>
                    </div>
                    <a class="enlarge-btn">
                      <i class="fa-solid fa-chevron-up"></i>
                      <div class="enlarge-text-container"><p class="enlarge-text show">Show All</p><p class="reduce-text">Reduce</p></div>
                    </a>
                  </div>
                </section>

              </section>
      
            </section>

          </section>
        </section>

        <div class="to-top-container">
          <a href="#top" class="to-top">
            <span class="material-symbols-outlined">keyboard_double_arrow_up</span>
            to Top
          </a>
        </div>
        <hr class="separater">


        <section class="chapter" id="chapter4">
          <a class="chapter-title-container" href="#chapter4">
            <h2 class="chapter-title"> JavaScript </h2>
          </a>
          <section class="chapter-contents-container">

            <section class="subchapter" id="subchapter4-1">
              <a class="subchapter-title-container" href="#subchapter4-1">
                <h3 class="subchapter-title"> モーダル関連のJavaScript </h3>
              </a>
              <section class="subchapter-contents-container">
                <p class="paragraph">
                  マウス操作の場合、
                  <span class="show-code"><code class="inline-code"> 'mousedown' </code></span>
                  →
                  <span class="show-code"><code class="inline-code"> 'mousemove' </code></span>
                  →
                  <span class="show-code"><code class="inline-code"> 'mouseup' </code></span>
                  →
                  <span class="show-code"><code class="inline-code"> 'click' </code></span>
                  の順に発火する。
                  最後がclickであることに注意。
                </p>

                <section class="note-container">
                  <h5 class="note-text">
                    <i class="fa-solid fa-arrow-pointer"></i> マウス操作: モーダルの移動
                  </h5>
                  <hr class="note-underline">
                  
                  <div class="note-contents">
                    <section class="note-content">
                      <ol class="note-list-container" data-list-style-type="lower-roman" data-container-type="step">
                
                        <li class="note-list">
                          <div class="note-list-item">
                            <span class="step-dotted-line"></span>
                            <div class="note-list-title"> mousedown </div>
                            <div class="step-detail-container">
                              <div class="step-detail">
                                <p>
                                  この場合使わないが最小化ボタンと展開ボタンにひとまずclickイベントを追加しておく
                                  (ボタン部分をつかんで移動する場合もあるので、
                                  mousedownの段階ではまだ、ユーザーがclickしたいのか、mousemoveしたいのかわからない)。
                                  windowにmousemoveイベントを追加。
                                </p>
                              </div>
                            </div>
                          </div>
                        </li>
                        <li class="note-list">
                          <div class="note-list-item">
                            <span class="step-dotted-line"></span>
                            <div class="note-list-title"> mousemove </div>
                            <div class="step-detail-container">
                              <div class="step-detail">
                                <p>
                                  追加したmousemoveのリスナーで移動実行
                                </p>
                              </div>
                            </div>
                          </div>
                        </li>
                        <li class="note-list">
                          <div class="note-list-item">
                            <span class="step-dotted-line"></span>
                            <div class="note-list-title"> mouseup </div>
                            <div class="step-detail-container">
                              <div class="step-detail">
                                <p>
                                  直前に、mousemoveイベントが発火していれば、ユーザーはモーダルの移動をしたかったということなので、
                                  ボタンに付けたclickイベントは削除。
                                  mousemoveイベントもwindowにつけているので、実行後のこのタイミングで削除しないとあとで誤発火する。
                                </p>
                              </div>
                            </div>
                          </div>
                        </li>
                        <li class="note-list">
                          <div class="note-list-item">
                            <span class="step-dotted-line"></span>
                            <div class="note-list-title"> click </div>
                            <div class="step-detail-container">
                              <div class="step-detail">
                                <p>
                                  なにも起こらない。
                                  mousemoveがあっても、clickイベントは最後に必ず発火してしまう。
                                  ので、3でclickイベントを削除している。
                                </p>
                              </div>
                            </div>
                          </div>
                        </li>
                
                      </ol>
                    </section>
                  </div>
                </section>

                <section class="note-container">
                  <h5 class="note-text">
                    <i class="fa-solid fa-arrow-pointer"></i> マウス操作: 最小化・展開ボタンのクリック
                  </h5>
                  <hr class="note-underline">
                  
                  <div class="note-contents">
                    <section class="note-content">
                      <ol class="note-list-container" data-list-style-type="lower-roman" data-container-type="step">
                
                        <li class="note-list">
                          <div class="note-list-item">
                            <span class="step-dotted-line"></span>
                            <div class="note-list-title"> mousedown </div>
                            <div class="step-detail-container">
                              <div class="step-detail">
                                <p>
                                  最小化ボタンと展開ボタンにclickイベントを追加しておく
                                  この場合使わないがwindowにmousemoveイベントを追加。
                                  (mousedownの段階ではまだ、ユーザーがclickしたいのか、mousemoveしたいのかわからない)。
                                </p>
                              </div>
                            </div>
                          </div>
                        </li>
                        <li class="note-list">
                          <div class="note-list-item">
                            <span class="step-dotted-line"></span>
                            <div class="note-list-title"> mousemove </div>
                            <div class="step-detail-container">
                              <div class="step-detail">
                                <p>
                                  クリックの場合発火しない
                                </p>
                              </div>
                            </div>
                          </div>
                        </li>
                        <li class="note-list">
                          <div class="note-list-item">
                            <span class="step-dotted-line"></span>
                            <div class="note-list-title"> mouseup </div>
                            <div class="step-detail-container">
                              <div class="step-detail">
                                <p>
                                  直前に、mousemoveイベントが発火していなければ、ユーザーはクリックをしたいだけなので、
                                  mousemoveイベントは削除しておく。
                                </p>
                              </div>
                            </div>
                          </div>
                        </li>
                        <li class="note-list">
                          <div class="note-list-item">
                            <span class="step-dotted-line"></span>
                            <div class="note-list-title"> click </div>
                            <div class="step-detail-container">
                              <div class="step-detail">
                                <p>
                                  1でボタンに付けていたリスナーが実行され、その処理の最後で自身(クリックイベント)を削除。
                                </p>
                              </div>
                            </div>
                          </div>
                        </li>
                
                      </ol>
                    </section>
                  </div>
                </section>

                <p class="paragraph">
                  タッチ操作のモーダル移動の場合、イベント発火順は
                  <span class="show-code"><code class="inline-code"> 'touchstart' </code></span>
                  →
                  <span class="show-code"><code class="inline-code"> 'touchmove' </code></span>
                  →
                  <span class="show-code"><code class="inline-code"> 'touchend' </code></span>
                  →
                  <span class="show-code"><code class="inline-code"> 'click' </code></span>
                  。
                </p>
                <section class="note-container">
                  <h5 class="note-text">
                    <i class="fa-regular fa-hand-pointer"></i> タッチ操作: モーダルの移動
                  </h5>
                  <hr class="note-underline">
                  
                  <div class="note-contents">
                    <section class="note-content">
                      <ol class="note-list-container" data-list-style-type="lower-roman" data-container-type="step">
                
                        <li class="note-list">
                          <div class="note-list-item">
                            <span class="step-dotted-line"></span>
                            <div class="note-list-title"> touchstart </div>
                            <div class="step-detail-container">
                              <div class="step-detail">
                                <p>
                                  この場合使わないが最小化ボタンと展開ボタンにひとまずclickイベントを追加しておく
                                  (ボタン部分をつかんで移動する場合もあるので、
                                  touchstartの段階ではまだ、ユーザーがclickしたいのか、touchmoveしたいのかわからない)。
                                  windowにtouchmoveイベントを追加。
                                </p>
                              </div>
                            </div>
                          </div>
                        </li>
                        <li class="note-list">
                          <div class="note-list-item">
                            <span class="step-dotted-line"></span>
                            <div class="note-list-title"> touchmove </div>
                            <div class="step-detail-container">
                              <div class="step-detail">
                                <p>
                                  追加したtouchmoveのリスナーで移動実行。
                                </p>
                              </div>
                            </div>
                          </div>
                        </li>
                        <li class="note-list">
                          <div class="note-list-item">
                            <span class="step-dotted-line"></span>
                            <div class="note-list-title"> touchend </div>
                            <div class="step-detail-container">
                              <div class="step-detail">
                                <p>
                                  直前に、mousemoveイベントが発火していれば、ユーザーはモーダルの移動をしたかったということなので、
                                  1でボタンに付けたclickイベントリスナーは削除。
                                  touchmoveイベントもwindowにつけているので、実行後のこのタイミングで削除しないとあとで誤発火する。
                                </p>
                              </div>
                            </div>
                          </div>
                        </li>
                        <li class="note-list">
                          <div class="note-list-item">
                            <span class="step-dotted-line"></span>
                            <div class="note-list-title"> click </div>
                            <div class="step-detail-container">
                              <div class="step-detail">
                                <p>
                                  イベントリスナーは削除済みなので、なにも起こらない。
                                </p>
                              </div>
                            </div>
                          </div>
                        </li>
                
                      </ol>
                    </section>
                  </div>
                </section>

                <p class="paragraph">
                  タップの場合、イベント発火順は
                  <span class="show-code"><code class="inline-code"> 'touchstart' </code></span>
                  →
                  <span class="show-code"><code class="inline-code"> 'touchend' </code></span>
                  →
                  <span class="show-code"><code class="inline-code"> 'mousedown' </code></span>
                  →
                  <span class="show-code"><code class="inline-code"> 'mouseup' </code></span>
                  →
                  <span class="show-code"><code class="inline-code"> 'click' </code></span>
                  。
                </p>
                <section class="note-container">
                  <h5 class="note-text">
                    <i class="fa-regular fa-hand-pointer"></i> タッチ操作: 最小化・展開ボタンのクリック(タップ)
                  </h5>
                  <hr class="note-underline">
                  
                  <div class="note-contents">
                    <section class="note-content">
                      <ol class="note-list-container" data-list-style-type="lower-roman" data-container-type="step">
                
                        <li class="note-list">
                          <div class="note-list-item">
                            <span class="step-dotted-line"></span>
                            <div class="note-list-title"> touchstart </div>
                            <div class="step-detail-container">
                              <div class="step-detail">
                                <p>
                                  最小化ボタンと展開ボタンにclickイベントを追加。
                                  この場合使わないが、touchmoveイベントもwindowに追加しておく。
                                  (ボタン部分をつかんで移動する場合もあるので、
                                  touchstartの段階ではまだ、ユーザーがclickしたいのか、touchmoveしたいのかわからない)。
                                </p>
                              </div>
                            </div>
                          </div>
                        </li>
                        <li class="note-list">
                          <div class="note-list-item">
                            <span class="step-dotted-line"></span>
                            <div class="note-list-title"> touchmove </div>
                            <div class="step-detail-container">
                              <div class="step-detail">
                                <p>
                                  この場合発火しない。
                                </p>
                              </div>
                            </div>
                          </div>
                        </li>
                        <li class="note-list">
                          <div class="note-list-item">
                            <span class="step-dotted-line"></span>
                            <div class="note-list-title"> touchend </div>
                            <div class="step-detail-container">
                              <div class="step-detail">
                                <p>
                                  直前に、touchmoveイベントが発火していなければ、ユーザーはクリックをしたいだけなので、
                                  touchmoveイベントは削除しておく。
                                </p>
                              </div>
                            </div>
                          </div>
                        </li>
                        <li class="note-list">
                          <div class="note-list-item">
                            <span class="step-dotted-line"></span>
                            <div class="note-list-title"> mousedown, mouseup </div>
                            <div class="step-detail-container">
                              <div class="step-detail">
                                <p>
                                  mouse系も発火し、1 ～ 3が実行される。
                                </p>
                              </div>
                            </div>
                          </div>
                        </li>
                        <li class="note-list">
                          <div class="note-list-item">
                            <span class="step-dotted-line"></span>
                            <div class="note-list-title"> click </div>
                            <div class="step-detail-container">
                              <div class="step-detail">
                                <p>
                                  最小化または展開が実行され、自身(クリックイベント)を削除。
                                </p>
                              </div>
                            </div>
                          </div>
                        </li>
                
                      </ol>
                    </section>
                  </div>
                </section>

                <section class="code-prettify-container">
                  <nav class="lang-type-tabs">
                    <button class="lang-type-tab active"> main.js </button>
                  </nav>
      
                  <div class="code-prettify-contents">
                    <div class="code-prettify-content active">
                      <button class="clipboard-btn"><i class="fa-solid fa-clipboard"></i></button>
                      <pre><code class="prettyprint linenums" data-pp-highlight=""></code></pre>
                    </div>
                    <a class="enlarge-btn">
                      <i class="fa-solid fa-chevron-up"></i>
                      <div class="enlarge-text-container"><p class="enlarge-text show">Show All</p><p class="reduce-text">Reduce</p></div>
                    </a>
                  </div>
                </section>

              </section>
      
            </section>


            <section class="subchapter" id="subchapter4-2">
              <a class="subchapter-title-container" href="#subchapter4-2">
                <h3 class="subchapter-title"> おまけ: ダークモード切り替えに関するJavaScript </h3>
              </a>
              <section class="subchapter-contents-container">
                <p class="paragraph">
                  ページロード時には、theme.cssに書いたスタイルに従って、ブラウザの設定に合ったテーマが設定される。
                  以下は、ラジオボタンからの入力を受けて、手動で切り替えるためのスクリプト。
                  事前にノーマル、ダークの二種類のカラーセットを用意しておき、ラジオの変化を検知したら、
                  カラーセットのオブジェクトでループを回して、
                  <span class="show-code"><code class="inline-code"> :root { } </code></span>
                  の中のカラーセットを上書きすればよい。
                  実際のところは、カラーセットはデータベースに入れたり、ローカルストレージに入れたりするのだろうけど今は直書き。
                </p>

                <section class="code-prettify-container">
                  <nav class="lang-type-tabs">
                    <button class="lang-type-tab active"> changeTheme.js </button>
                  </nav>
      
                  <div class="code-prettify-contents">
                    <div class="code-prettify-content active">
                      <button class="clipboard-btn"><i class="fa-solid fa-clipboard"></i></button>
                      <pre><code class="prettyprint linenums" data-pp-highlight=""></code></pre>
                    </div>
                    <a class="enlarge-btn">
                      <i class="fa-solid fa-chevron-up"></i>
                      <div class="enlarge-text-container"><p class="enlarge-text show">Show All</p><p class="reduce-text">Reduce</p></div>
                    </a>
                  </div>
                </section>

              </section>
      
            </section>


          </section>
        </section>

        <div class="to-top-container">
          <a href="#top" class="to-top">
            <span class="material-symbols-outlined">keyboard_double_arrow_up</span>
            to Top
          </a>
        </div>
        <hr class="separater">


        <section class="chapter" id="chapter5">
          <a class="chapter-title-container" href="#chapter5">
            <h2 class="chapter-title">知らなかったこと</h2>
          </a>
          <section class="chapter-contents-container">
            <p class="paragraph">
              要素をリサイズできるようにするのには、
              <span class="show-code"><code class="inline-code"> overflow: visible; </code></span>
              以外と、
              <span class="show-code"><code class="inline-code"> resize </code></span>
              プロパティの指定をする。
              プロパティ値には、
              <span class="show-code"><code class="inline-code"> both </code></span>、
              <span class="show-code"><code class="inline-code"> horizontal </code></span>、
              <span class="show-code"><code class="inline-code"> vertical </code></span>、
              <span class="show-code"><code class="inline-code"> none </code></span>
              などがあり、英単語そのままの意味。
              inline要素には効かない。

              ダークモード時にあてたいスタイルがあれば、
              <span class="show-code"><code class="inline-code"> @media (prefers-color-scheme: dark) {} </code></span>
              で書く。
              <span class="show-code"><code class="inline-code"> window.matchMedia('(prefers-color-scheme: dark)').matches </code></span>
              でブラウザのテーマ判定ができる。
            </p>

          </section>
        </section>

        <div class="end-container">
          <p class="end-text">END.</p>
          <a href="#top" class="to-top">
            <span class="material-symbols-outlined">keyboard_double_arrow_up</span>
            to Top
          </a>
        </div>
        <hr class="separater final-separater">

      </article>

      <div class="not-main-article">
        <section class="related-container">
          <h2 class="related-text">RELATED ARTICLE</h2>
          <ul id="related-ul">
            <!-- new.mjs から li 要素を生成 -->
          </ul>
        </section>
      </div>

    </div>

    <!-- サイドメニュー開閉ボタン -->
    <button id="menu-btn">
      <img id="img-fish" src="../img/30643.png" alt="サイドメニューの開閉ボタン">
    </button>

    <!-- サイドメニュー -->
    <aside>
      <nav class="menu-nav">
        <h4 class="menu-title"> MENU </h4>
        <!-- 第1層 -->
        <ul class="ul-first-floor">
          <li><a href="#">About</a></li>
          <li class="li-first-floor">
            <button href="#">Programming</button>
            <!-- 第2層 -->
            <ul class="ul-second-floor">
              <li class="li-second-floor">
                <button>HTML</button>
                <!-- 第3層 -->
                <ul class="ul-third-floor">
                  <li><a href="#">第一回</a></li>
                  <li><a href="#">第二回</a></li>
                  <li><a href="#">第三回</a></li>
                  <li><a href="#">第一回</a></li>
                  <li><a href="#">第二回</a></li>
                  <li><a href="#">第三回</a></li>
                </ul>
              </li>
              <!-- <li class="li-second-floor">
                <button>CSS</button>
                第3層
                <ul class="ul-third-floor">
                  <li><a href="#">第一回</a></li>
                  <li><a href="#">第二回</a></li>
                  <li><a href="#">第三回</a></li>
                </ul>
              </li>
              <li class="li-second-floor">
                <button>JavaScript</button>
                第3層
                <ul class="ul-third-floor">
                  <li><a href="#">第一回</a></li>
                  <li><a href="#">第二回</a></li>
                  <li><a href="#">第三回</a></li>
                </ul>
              </li>
              <li class="li-second-floor">
                <button>PHP</button>
                第3層
                <ul class="ul-third-floor">
                  <li><a href="#">第一回</a></li>
                  <li><a href="#">第二回</a></li>
                  <li><a href="#">第三回</a></li>
                </ul>
              </li>
              <li class="li-second-floor">
                <button>vscode</button>
                第3層
                <ul class="ul-third-floor">
                  <li><a href="#">第一回</a></li>
                  <li><a href="#">第二回</a></li>
                  <li><a href="#">第三回</a></li>
                </ul>
              </li> -->
            </ul>
          </li>
        </ul>
        <h4 class="menu-title"> MENU </h4>
      </nav>
    </aside>

  </main>



  <footer>
    <div id="aquarium-bg-container">

      <div class="footer-container">
        <a href="#top" id="footer-logo">
          <img src="../img/favicon/favicon1.png" width="100" height="100" alt="">
          <h4>MEMORARiUM</h4>
        </a>
        <nav>
          <ul>
            <li> <a href="../index.html"> Home   </a> </li>
            <li> <a href="#"            > About  </a> </li>
            <li> <a href="#"            >Contact </a> </li>
          </ul>
        </nav>
      </div>

      <!-- 水草生成部分 -->
      <div id="seaweed-bg">
        <div class="seaweed">
          <span class="first"></span><span class="second"></span><span class="third"></span>
        </div>
        <div class="seaweed">
          <span class="first"></span><span class="second"></span><span class="third"></span>
        </div>
      </div>
      <!-- 砂粒生成部分 -->
      <div id="sand-bg"></div>

    </div>

  </footer>



  <!-- code-prettify -->
  <script src="../js/prettify.js"></script>
  <script src="../js/lang-css.js"></script>
</body>

</html>